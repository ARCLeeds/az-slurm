# Deploy a CentOS based Slurm cluster

This template deploys a Slurm cluster using CentOS 7.4 or CentOS-HPC (RDMA for Infiband network in image). 

The default compute node choice is Standard_D2_v2 which requires CentOS as the OS choice. Use CentOS-HPC if using H16r or H16mr,

The template also sets up an NFS share on the master node at /data and it shared and mounted on the compute nodes at the same location, and bind mounts the home directories to this, keeping them in sync across all nodes.

After your cluster has been provisioned in Azure, you will find an Ansible playbook in the azureuser's home directory that when run will update the slurm.conf file on the master and worker nodes with the correct vCPU count of the compute nodes.

"ansible-playbook create_slurm_conf.yml"

## Using the cluster

Simply SSH to the master node as the azuresuser and the password you give when filling out the form and do a srun or sbatch submission. The DNS name is is generated by the template and returned as a template output that can be viewed in the portal or by looking at the deployment outputs.  You can also use Azure AD.
